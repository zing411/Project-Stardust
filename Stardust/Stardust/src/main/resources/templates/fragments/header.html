<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" th:href="@{/stardust/home}">Stardust</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent"
          aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" th:href="@{/stardust/home}">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" th:href="@{/user/stardust/store}">Games</a>
      </li>
    </ul>

    <!-- Container for Search Form & Dark Mode Toggle -->
    <div class="d-flex align-items-center">

      <!-- SEARCH FORM (toggles input via the icon) -->
      <form th:action="@{/stardust/store}" method="get" class="form-inline" id="searchForm">
        <!-- Search Icon toggles the input field -->
        <a href="#" id="searchIcon" class="text-white mr-2">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
               class="bi bi-search" viewBox="0 0 16 16">
            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85
                         a1 1 0 0 0 1.415-1.415l-3.85-3.85zm-5.442 0
                         a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
          </svg>
        </a>
        <!-- Hidden search input. Name MUST be 'search' so the controller sees it. -->
        <input type="text" name="search" id="searchInput"
               class="form-control mr-2 d-none" placeholder="Search games...">
      </form>

      <!-- DARK MODE TOGGLE -->
      <button id="theme_switch" class="btn btn-link text-white">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
             viewBox="0 0 24 24">
          <path d="M12 4.354a7.646 7.646 0 1 1 0 15.292
                       7.646 7.646 0 0 1 0-15.292zm0 13.292
                       a5.646 5.646 0 1 0 0-11.292
                       5.646 5.646 0 0 0 0 11.292z"/>
          <path d="M12 2v2M12 20v2
                       M4.222 4.222l1.414 1.414
                       M18.364 18.364l1.414 1.414
                       M2 12h2M20 12h2
                       M4.222 19.778l1.414-1.414
                       M18.364 5.636l1.414-1.414"/>
        </svg>
      </button>
    </div>
  </div>
</nav>

<!-- Load your external darkmode.js -->
<script th:src="@{/js/darkmode.js}" defer></script>

<!-- Inline script for toggling search input -->
<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Toggle search input
    const searchIcon = document.getElementById("searchIcon");
    const searchInput = document.getElementById("searchInput");

    searchIcon.addEventListener("click", function(e) {
      e.preventDefault();
      searchInput.classList.toggle("d-none");
      if (!searchInput.classList.contains("d-none")) {
        searchInput.focus();
      }
    });
  });
</script>
</body>
</html>
